# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø–ª–∞–≥–∏–Ω–æ–≤ –¥–ª—è WebdoctorV

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —á–µ–∫–µ—Ä-–ø–ª–∞–≥–∏–Ω –¥–ª—è WebdoctorV –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω—è—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–ª–∞–≥–∏–Ω–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø–ª–∞–≥–∏–Ω–∞)
- [–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞](#—Å–æ–∑–¥–∞–Ω–∏–µ-–ø–ª–∞–≥–∏–Ω–∞)
- [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å IChecker](#–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å-ichecker)
- [–†–∞–±–æ—Ç–∞ —Å ServiceConfig](#—Ä–∞–±–æ—Ç–∞-—Å-serviceconfig)
- [–í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](#–≤–æ–∑–≤—Ä–∞—Ç-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
- [–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–ø–ª–∞–≥–∏–Ω–∞)
- [–£–ø–∞–∫–æ–≤–∫–∞ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ](#—É–ø–∞–∫–æ–≤–∫–∞-–∏-—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ)
- [–ü—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∏–º–µ—Ä—ã)
- [–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#—á–∞—Å—Ç–æ-–∑–∞–¥–∞–≤–∞–µ–º—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)

## –í–≤–µ–¥–µ–Ω–∏–µ

–ü–ª–∞–≥–∏–Ω—ã WebdoctorV –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –¥–æ–±–∞–≤–ª—è—è –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏ —Ç–∏–ø–æ–≤ –ø—Ä–æ–≤–µ—Ä–æ–∫. –ü–ª–∞–≥–∏–Ω—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ –ø–∞–ø–∫–∏ `plugins/` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–ª–∞–≥–∏–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ —Ñ–æ—Ä–∫–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è WebdoctorV –Ω–µ –ª–æ–º–∞—é—Ç –≤–∞—à–∏ –ø–ª–∞–≥–∏–Ω—ã
- ‚úÖ –õ–µ–≥–∫–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å —á–µ—Ä–µ–∑ NuGet –∏–ª–∏ GitHub
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è - —Å–ª–æ–º–∞–Ω–Ω—ã–π –ø–ª–∞–≥–∏–Ω –Ω–µ —É—Ä–æ–Ω–∏—Ç —Å–∏—Å—Ç–µ–º—É
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ - –≤—Å–µ–≥–æ –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∫–ª–∞—Å—Å–æ–≤ (.NET 6.0 –∏–ª–∏ –≤—ã—à–µ):

```bash
dotnet new classlib -n WebdoctorV.Plugin.MyChecker
cd WebdoctorV.Plugin.MyChecker
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–î–æ–±–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ WebdoctorV (—á–µ—Ä–µ–∑ NuGet –∏–ª–∏ –ø—Ä–æ–µ–∫—Ç):

```bash
# –ï—Å–ª–∏ WebdoctorV –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –∫–∞–∫ NuGet –ø–∞–∫–µ—Ç
dotnet add package WebdoctorV.Plugin.SDK

# –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –ø—Ä–æ–µ–∫—Ç (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
dotnet add reference ../WebdoctorV/WebdoctorV.csproj
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ —á–µ–∫–µ—Ä–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `MyChecker.cs`:

```csharp
using WebdoctorV.Checkers;
using WebdoctorV.Models;

namespace WebdoctorV.Plugin.MyChecker;

public class MyChecker : IChecker
{
    public bool Supports(string protocol)
    {
        return protocol.Equals("myprotocol", StringComparison.OrdinalIgnoreCase);
    }

    public async Task<CheckResult> CheckAsync(ServiceConfig service, string path)
    {
        var result = new CheckResult
        {
            ServiceId = service.Id,
            Path = path,
            Protocol = service.Protocol,
            Name = service.Name ?? service.Id,
            Status = CheckStatus.Pending
        };

        var startTime = DateTime.UtcNow;

        try
        {
            // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–µ—Å—å
            // ...

            result.Status = CheckStatus.Alive;
            result.Duration = DateTime.UtcNow - startTime;
            result.LastCheck = DateTime.UtcNow;
        }
        catch (Exception ex)
        {
            result.Status = CheckStatus.Dead;
            result.Error = ex.Message;
            result.Duration = DateTime.UtcNow - startTime;
            result.LastCheck = DateTime.UtcNow;
        }

        return result;
    }
}
```

### –®–∞–≥ 4: –ö–æ–º–ø–∏–ª—è—Ü–∏—è

```bash
dotnet build -c Release
```

### –®–∞–≥ 5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–∞

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `.dll` —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É `plugins/` —Ä—è–¥–æ–º —Å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–∞–π–ª–æ–º WebdoctorV:

```
webdoctorv/
  ‚îú‚îÄ‚îÄ WebdoctorV.exe (–∏–ª–∏ .dll)
  ‚îú‚îÄ‚îÄ plugins/
  ‚îÇ   ‚îî‚îÄ‚îÄ WebdoctorV.Plugin.MyChecker.dll
  ‚îî‚îÄ‚îÄ config.hcl
```

–ì–æ—Ç–æ–≤–æ! WebdoctorV –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç –∏ –∑–∞–≥—Ä—É–∑–∏—Ç –≤–∞—à –ø–ª–∞–≥–∏–Ω –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–ª–∞–≥–∏–Ω–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
WebdoctorV.Plugin.MyChecker/
  ‚îú‚îÄ‚îÄ MyChecker.csproj          # –§–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞
  ‚îú‚îÄ‚îÄ MyChecker.cs               # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å —á–µ–∫–µ—Ä–∞
  ‚îú‚îÄ‚îÄ README.md                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞
  ‚îî‚îÄ‚îÄ Properties/
      ‚îî‚îÄ‚îÄ AssemblyInfo.cs       # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–±–æ—Ä–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–µ–∫—Ç—É

- **Target Framework**: .NET 6.0 –∏–ª–∏ –≤—ã—à–µ
- **–¢–∏–ø –ø—Ä–æ–µ–∫—Ç–∞**: Class Library
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –¢–æ–ª—å–∫–æ `WebdoctorV.Plugin.SDK` (–∏–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç)

### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å—Ö–µ–º—É –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è:
- –ü—Ä–æ–µ–∫—Ç: `WebdoctorV.Plugin.{ProtocolName}Checker`
- Namespace: `WebdoctorV.Plugin.{ProtocolName}`
- –ö–ª–∞—Å—Å: `{ProtocolName}Checker`

–ü—Ä–∏–º–µ—Ä—ã:
- `WebdoctorV.Plugin.RedisChecker`
- `WebdoctorV.Plugin.MongoDBChecker`
- `WebdoctorV.Plugin.ElasticsearchChecker`

## –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞

### –§–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞ (.csproj)

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä `MyChecker.csproj`:

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net6.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <AssemblyName>WebdoctorV.Plugin.MyChecker</AssemblyName>
    <RootNamespace>WebdoctorV.Plugin.MyChecker</RootNamespace>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="WebdoctorV.Plugin.SDK" Version="1.0.0" />
  </ItemGroup>
</Project>
```

### –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å —á–µ–∫–µ—Ä–∞

–ö–∞–∂–¥—ã–π –ø–ª–∞–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–ª–∞—Å—Å, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IChecker`:

```csharp
using WebdoctorV.Checkers;
using WebdoctorV.Models;

namespace WebdoctorV.Plugin.MyChecker;

public class MyChecker : IChecker
{
    // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
}
```

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å IChecker

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IChecker` —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –º–µ—Ç–æ–¥–æ–≤:

### bool Supports(string protocol)

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ —á–µ–∫–µ—Ä —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `protocol` - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "redis", "mongodb", "myprotocol")

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `true` - –µ—Å–ª–∏ —á–µ–∫–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª
- `false` - –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ

**–ü—Ä–∏–º–µ—Ä:**

```csharp
public bool Supports(string protocol)
{
    return protocol.Equals("redis", StringComparison.OrdinalIgnoreCase) ||
           protocol.Equals("rediss", StringComparison.OrdinalIgnoreCase); // Redis over SSL
}
```

### Task<CheckResult> CheckAsync(ServiceConfig service, string path)

–í—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Å–µ—Ä–≤–∏—Å–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `service` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ HCL —Ñ–∞–π–ª–∞
- `path` - –ø—É—Ç—å –∫ —Å–µ—Ä–≤–∏—Å—É –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "databases.redis")

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `CheckResult` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ü—Ä–∏–º–µ—Ä:**

```csharp
public async Task<CheckResult> CheckAsync(ServiceConfig service, string path)
{
    var result = new CheckResult
    {
        ServiceId = service.Id,
        Path = path,
        Protocol = service.Protocol,
        Name = service.Name ?? service.Id,
        Status = CheckStatus.Pending
    };

    var startTime = DateTime.UtcNow;

    try
    {
        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
        var isHealthy = await PerformCheck(service);

        result.Status = isHealthy ? CheckStatus.Alive : CheckStatus.Dead;
        result.Duration = DateTime.UtcNow - startTime;
        result.LastCheck = DateTime.UtcNow;
    }
    catch (Exception ex)
    {
        result.Status = CheckStatus.Dead;
        result.Error = ex.Message;
        result.Duration = DateTime.UtcNow - startTime;
        result.LastCheck = DateTime.UtcNow;
    }

    return result;
}
```

## –†–∞–±–æ—Ç–∞ —Å ServiceConfig

`ServiceConfig` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ä–≤–∏—Å–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

### –ë–∞–∑–æ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞

```csharp
public class ServiceConfig
{
    public string Id { get; set; }              // ID —Å–µ—Ä–≤–∏—Å–∞
    public string? Name { get; set; }           // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è
    public string Protocol { get; set; }         // –ü—Ä–æ—Ç–æ–∫–æ–ª ("redis", "mongodb", etc.)
    public string Host { get; set; }             // –•–æ—Å—Ç
    public int Port { get; set; }                // –ü–æ—Ä—Ç
    public TimeSpan? Timeout { get; set; }       // –¢–∞–π–º–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
    public int RetryCount { get; set; }          // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–æ–≤
    public TimeSpan? RetryDelay { get; set; }    // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–∞–º–∏
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–æ–≤

–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `service.Timeout` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```csharp
var timeout = service.Timeout ?? TimeSpan.FromSeconds(30);
using var cts = new CancellationTokenSource(timeout);

try
{
    await SomeAsyncOperation(cts.Token);
}
catch (OperationCanceledException)
{
    result.Status = CheckStatus.Dead;
    result.Error = "Operation timeout";
}
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞

–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ `ServiceConfig`. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è Redis –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```csharp
// –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ HCL
service "redis-cache" {
  protocol = "redis"
  host = "redis.example.com"
  port = 6379
  password = "secret"
  database = 0
}

// –í —á–µ–∫–µ—Ä–µ
var password = service.Password; // –ï—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ ServiceConfig
var database = service.Database; // –ï—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ ServiceConfig
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ `ServiceConfig`, —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `AdditionalInfo` –≤ `CheckResult`.

## –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ CheckResult

```csharp
public class CheckResult
{
    public string ServiceId { get; set; }        // ID —Å–µ—Ä–≤–∏—Å–∞
    public string Path { get; set; }             // –ü—É—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    public string FullHttpPath { get; set; }      // –ü–æ–ª–Ω—ã–π HTTP –ø—É—Ç—å (–¥–ª—è HTTP —á–µ–∫–µ—Ä–æ–≤)
    public string Protocol { get; set; }         // –ü—Ä–æ—Ç–æ–∫–æ–ª
    public string Name { get; set; }             // –ò–º—è —Å–µ—Ä–≤–∏—Å–∞
    public string Host { get; set; }             // –•–æ—Å—Ç
    public int Port { get; set; }                // –ü–æ—Ä—Ç
    public string? AdditionalInfo { get; set; }  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    public CheckStatus Status { get; set; }      // –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏
    public TimeSpan? Duration { get; set; }       // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏
    public DateTime? LastCheck { get; set; }      // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
    public string? Error { get; set; }           // –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
}
```

### –°—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

```csharp
public enum CheckStatus
{
    Pending = -1,  // –û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
    Dead = 0,      // –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
    Alive = 1      // –°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω
}
```

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

–í—Å–µ–≥–¥–∞ –∑–∞–ø–æ–ª–Ω—è–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:

```csharp
result.ServiceId = service.Id;
result.Path = path;
result.Protocol = service.Protocol;
result.Name = service.Name ?? service.Id;
result.Host = service.Host;
result.Port = service.Port;
result.Status = CheckStatus.Alive; // –∏–ª–∏ Dead
result.Duration = DateTime.UtcNow - startTime;
result.LastCheck = DateTime.UtcNow;
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `AdditionalInfo` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:

```csharp
// –î–ª—è Redis
result.AdditionalInfo = $"Database: {database}, Keys: {keyCount}";

// –î–ª—è MongoDB
result.AdditionalInfo = $"Collections: {collectionCount}, Documents: {docCount}";
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å—Ç–∞—Ç—É—Å:

```csharp
try
{
    // –ü—Ä–æ–≤–µ—Ä–∫–∞
    result.Status = CheckStatus.Alive;
}
catch (TimeoutException ex)
{
    result.Status = CheckStatus.Dead;
    result.Error = $"Timeout: {ex.Message}";
}
catch (ConnectionException ex)
{
    result.Status = CheckStatus.Dead;
    result.Error = $"Connection failed: {ex.Message}";
}
catch (Exception ex)
{
    result.Status = CheckStatus.Dead;
    result.Error = ex.Message;
}
finally
{
    result.Duration = DateTime.UtcNow - startTime;
    result.LastCheck = DateTime.UtcNow;
}
```

## –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü–ª–∞–≥–∏–Ω—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—ã–µ NuGet –ø–∞–∫–µ—Ç—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Redis:

```xml
<ItemGroup>
  <PackageReference Include="StackExchange.Redis" Version="2.6.90" />
</ItemGroup>
```

```csharp
using StackExchange.Redis;

public class RedisChecker : IChecker
{
    public async Task<CheckResult> CheckAsync(ServiceConfig service, string path)
    {
        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ StackExchange.Redis
        var connection = await ConnectionMultiplexer.ConnectAsync(...);
        // ...
    }
}
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:

```csharp
public class RedisChecker : IChecker
{
    private static readonly Dictionary<string, ConnectionMultiplexer> _connections = new();

    public async Task<CheckResult> CheckAsync(ServiceConfig service, string path)
    {
        var connectionKey = $"{service.Host}:{service.Port}";
        
        if (!_connections.TryGetValue(connectionKey, out var connection))
        {
            connection = await ConnectionMultiplexer.ConnectAsync(...);
            _connections[connectionKey] = connection;
        }

        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    }
}
```

**–í–Ω–∏–º–∞–Ω–∏–µ:** –£—á–∏—Ç—ã–≤–∞–π—Ç–µ, —á—Ç–æ –ø–ª–∞–≥–∏–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –ø–∞–º—è—Ç–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–∞–±—ã–µ —Å—Å—ã–ª–∫–∏ –∏–ª–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `ILogger` (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ DI) –∏–ª–∏ `Console.WriteLine`:

```csharp
// –ü—Ä–æ—Å—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
Console.WriteLine($"[MyChecker] Checking {service.Host}:{service.Port}");

// –ò–ª–∏ —á–µ—Ä–µ–∑ ILogger (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
private readonly ILogger<MyChecker> _logger;

public MyChecker(ILogger<MyChecker> logger)
{
    _logger = logger;
}

_logger.LogInformation("Checking {Host}:{Port}", service.Host, service.Port);
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –ø–ª–∞–≥–∏–Ω—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–µ–∑ DI. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `Console.WriteLine` –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –≤ –ª–æ–≥–∞—Ö WebdoctorV.

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∏:

```csharp
public async Task<CheckResult> CheckAsync(ServiceConfig service, string path)
{
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
    if (string.IsNullOrEmpty(service.Host))
    {
        return new CheckResult
        {
            ServiceId = service.Id,
            Path = path,
            Protocol = service.Protocol,
            Status = CheckStatus.Dead,
            Error = "Host is required"
        };
    }

    if (service.Port <= 0 || service.Port > 65535)
    {
        return new CheckResult
        {
            ServiceId = service.Id,
            Path = path,
            Protocol = service.Protocol,
            Status = CheckStatus.Dead,
            Error = "Invalid port number"
        };
    }

    // –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏...
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞

### Unit —Ç–µ—Å—Ç—ã

–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç:

```bash
dotnet new xunit -n WebdoctorV.Plugin.MyChecker.Tests
dotnet add reference ../WebdoctorV.Plugin.MyChecker/WebdoctorV.Plugin.MyChecker.csproj
```

–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞:

```csharp
using Xunit;
using WebdoctorV.Models;
using WebdoctorV.Plugin.MyChecker;

public class MyCheckerTests
{
    [Fact]
    public void Supports_ReturnsTrue_ForSupportedProtocol()
    {
        var checker = new MyChecker();
        Assert.True(checker.Supports("myprotocol"));
    }

    [Fact]
    public async Task CheckAsync_ReturnsAlive_WhenServiceIsHealthy()
    {
        var checker = new MyChecker();
        var service = new ServiceConfig
        {
            Id = "test",
            Protocol = "myprotocol",
            Host = "localhost",
            Port = 8080
        };

        var result = await checker.CheckAsync(service, "test");

        Assert.Equal(CheckStatus.Alive, result.Status);
        Assert.NotNull(result.Duration);
    }
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker Compose –∏–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:

```yaml
# docker-compose.test.yml
version: '3.8'
services:
  test-service:
    image: my-service:test
    ports:
      - "8080:8080"
```

## –£–ø–∞–∫–æ–≤–∫–∞ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ

### –°–±–æ—Ä–∫–∞ –¥–ª—è —Ä–µ–ª–∏–∑–∞

```bash
dotnet build -c Release
dotnet pack -c Release
```

### –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ NuGet

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [nuget.org](https://www.nuget.org)
2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
3. –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –ø–∞–∫–µ—Ç:

```bash
dotnet nuget push WebdoctorV.Plugin.MyChecker.1.0.0.nupkg -k YOUR_API_KEY -s https://api.nuget.org/v3/index.json
```

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ GitHub Releases

1. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ª–∏–∑ –Ω–∞ GitHub
2. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ `.dll` —Ñ–∞–π–ª
3. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤ README

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–∞

#### –°–ø–æ—Å–æ–± 1: –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å DLL –≤ –ø–∞–ø–∫—É plugins
cp WebdoctorV.Plugin.MyChecker.dll /path/to/webdoctorv/plugins/
```

#### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Docker volume

```yaml
volumes:
  - ./plugins:/app/plugins
```

#### –°–ø–æ—Å–æ–± 3: –í—Å—Ç—Ä–æ–∏—Ç—å –≤ Docker –æ–±—Ä–∞–∑

```dockerfile
FROM webdoctorv:latest
COPY plugins/ /app/plugins/
```

## –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π TCP-–ø–æ–¥–æ–±–Ω—ã–π —á–µ–∫–µ—Ä

```csharp
using System.Net.Sockets;
using WebdoctorV.Checkers;
using WebdoctorV.Models;

namespace WebdoctorV.Plugin.MyProtocol;

public class MyProtocolChecker : IChecker
{
    public bool Supports(string protocol)
    {
        return protocol.Equals("myprotocol", StringComparison.OrdinalIgnoreCase);
    }

    public async Task<CheckResult> CheckAsync(ServiceConfig service, string path)
    {
        var result = new CheckResult
        {
            ServiceId = service.Id,
            Path = path,
            Protocol = service.Protocol,
            Name = service.Name ?? service.Id,
            Host = service.Host,
            Port = service.Port,
            Status = CheckStatus.Pending
        };

        var startTime = DateTime.UtcNow;

        try
        {
            using var client = new TcpClient();
            var timeout = service.Timeout ?? TimeSpan.FromSeconds(30);
            
            var connectTask = client.ConnectAsync(service.Host, service.Port);
            var timeoutTask = Task.Delay(timeout);
            
            var completedTask = await Task.WhenAny(connectTask, timeoutTask);
            
            if (completedTask == timeoutTask)
            {
                result.Status = CheckStatus.Dead;
                result.Error = "Connection timeout";
            }
            else
            {
                result.Status = client.Connected ? CheckStatus.Alive : CheckStatus.Dead;
            }
        }
        catch (Exception ex)
        {
            result.Status = CheckStatus.Dead;
            result.Error = ex.Message;
        }
        finally
        {
            result.Duration = DateTime.UtcNow - startTime;
            result.LastCheck = DateTime.UtcNow;
        }

        return result;
    }
}
```

### –ü—Ä–∏–º–µ—Ä 2: HTTP API —á–µ–∫–µ—Ä

```csharp
using System.Net.Http;
using WebdoctorV.Checkers;
using WebdoctorV.Models;

namespace WebdoctorV.Plugin.CustomApi;

public class CustomApiChecker : IChecker
{
    private readonly HttpClient _httpClient = new();

    public bool Supports(string protocol)
    {
        return protocol.Equals("customapi", StringComparison.OrdinalIgnoreCase);
    }

    public async Task<CheckResult> CheckAsync(ServiceConfig service, string path)
    {
        var result = new CheckResult
        {
            ServiceId = service.Id,
            Path = path,
            Protocol = service.Protocol,
            Name = service.Name ?? service.Id,
            Host = service.Host,
            Port = service.Port,
            Status = CheckStatus.Pending
        };

        var startTime = DateTime.UtcNow;

        try
        {
            var url = $"http://{service.Host}:{service.Port}{service.Path ?? "/health"}";
            var timeout = service.Timeout ?? TimeSpan.FromSeconds(30);
            _httpClient.Timeout = timeout;

            var response = await _httpClient.GetAsync(url);
            
            result.Status = response.IsSuccessStatusCode 
                ? CheckStatus.Alive 
                : CheckStatus.Dead;
            
            if (!response.IsSuccessStatusCode)
            {
                result.Error = $"HTTP {response.StatusCode}";
            }
        }
        catch (Exception ex)
        {
            result.Status = CheckStatus.Dead;
            result.Error = ex.Message;
        }
        finally
        {
            result.Duration = DateTime.UtcNow - startTime;
            result.LastCheck = DateTime.UtcNow;
        }

        return result;
    }
}
```

### –ü—Ä–∏–º–µ—Ä 3: Redis —á–µ–∫–µ—Ä (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)

```csharp
using StackExchange.Redis;
using WebdoctorV.Checkers;
using WebdoctorV.Models;

namespace WebdoctorV.Plugin.Redis;

public class RedisChecker : IChecker
{
    public bool Supports(string protocol)
    {
        return protocol.Equals("redis", StringComparison.OrdinalIgnoreCase) ||
               protocol.Equals("rediss", StringComparison.OrdinalIgnoreCase);
    }

    public async Task<CheckResult> CheckAsync(ServiceConfig service, string path)
    {
        var result = new CheckResult
        {
            ServiceId = service.Id,
            Path = path,
            Protocol = service.Protocol,
            Name = service.Name ?? service.Id,
            Host = service.Host,
            Port = service.Port,
            Status = CheckStatus.Pending
        };

        var startTime = DateTime.UtcNow;
        ConnectionMultiplexer? connection = null;

        try
        {
            var configuration = $"{service.Host}:{service.Port}";
            if (!string.IsNullOrEmpty(service.Password))
            {
                configuration += $",password={service.Password}";
            }

            var timeout = (int)(service.Timeout?.TotalMilliseconds ?? 30000);
            
            connection = await ConnectionMultiplexer.ConnectAsync(
                new ConfigurationOptions
                {
                    EndPoints = { configuration },
                    ConnectTimeout = timeout,
                    SyncTimeout = timeout
                }
            );

            var database = connection.GetDatabase();
            await database.PingAsync();

            result.Status = CheckStatus.Alive;
            result.AdditionalInfo = $"Connected to Redis";
        }
        catch (Exception ex)
        {
            result.Status = CheckStatus.Dead;
            result.Error = ex.Message;
        }
        finally
        {
            connection?.Dispose();
            result.Duration = DateTime.UtcNow - startTime;
            result.LastCheck = DateTime.UtcNow;
        }

        return result;
    }
}
```

## –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é?

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ `ServiceConfig`, —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –í—Ä–µ–º–µ–Ω–Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –∏–ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ `AdditionalInfo` —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

### –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Dependency Injection –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö?

–í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –ø–ª–∞–≥–∏–Ω—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–µ–∑ DI. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞–ø—Ä—è–º—É—é.

### –ö–∞–∫ –æ—Ç–ª–∞–¥–∏—Ç—å –ø–ª–∞–≥–∏–Ω?

1. –°–æ–±–µ—Ä–∏—Ç–µ –ø–ª–∞–≥–∏–Ω –≤ —Ä–µ–∂–∏–º–µ Debug
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ DLL –≤ –ø–∞–ø–∫—É `plugins/`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ WebdoctorV —Å –æ—Ç–ª–∞–¥—á–∏–∫–æ–º
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ breakpoint –≤ –∫–æ–¥–µ –ø–ª–∞–≥–∏–Ω–∞
5. –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –æ—Ç–ª–∞–¥—á–∏–∫ –∫ –ø—Ä–æ—Ü–µ—Å—Å—É WebdoctorV

### –ü–ª–∞–≥–∏–Ω –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è. –ß—Ç–æ –¥–µ–ª–∞—Ç—å?

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ DLL –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `plugins/`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–ª–∞–≥–∏–Ω —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ .NET
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ WebdoctorV –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª–∞—Å—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç `IChecker` –∏ –∏–º–µ–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏?

–î–∞! –ú–µ—Ç–æ–¥ `CheckAsync` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Task<CheckResult>`, –ø–æ—ç—Ç–æ–º—É –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `async/await` –∏ –ª—é–±—ã–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

### –ö–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã?

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `CancellationTokenSource` —Å —Ç–∞–π–º–∞—É—Ç–æ–º –∏–∑ `service.Timeout`:

```csharp
var timeout = service.Timeout ?? TimeSpan.FromSeconds(30);
using var cts = new CancellationTokenSource(timeout);

try
{
    await SomeAsyncOperation(cts.Token);
}
catch (OperationCanceledException)
{
    result.Status = CheckStatus.Dead;
    result.Error = "Operation timeout";
}
```

### –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–µ–∫–µ—Ä–æ–≤ –≤ –æ–¥–Ω–æ–º –ø–ª–∞–≥–∏–Ω–µ?

–î–∞! –û–¥–∏–Ω –ø–ª–∞–≥–∏–Ω –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–æ–≤, —Ä–µ–∞–ª–∏–∑—É—é—â–∏—Ö `IChecker`. –í—Å–µ –æ–Ω–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.

### –ö–∞–∫ –≤–µ—Ä–Ω—É—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–≤–µ—Ä–∫–µ?

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–µ `AdditionalInfo` –≤ `CheckResult`:

```csharp
result.AdditionalInfo = $"Version: {version}, Uptime: {uptime}";
```

–≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –∏ API.

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π WebdoctorV](https://github.com/your-org/webdoctorv)
- [–ü—Ä–∏–º–µ—Ä—ã –ø–ª–∞–≥–∏–Ω–æ–≤](https://github.com/your-org/webdoctorv-plugins)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è .NET](https://docs.microsoft.com/dotnet/)
- [NuGet Package Explorer](https://www.nuget.org/packages/NuGetPackageExplorer/)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [FAQ](#—á–∞—Å—Ç–æ-–∑–∞–¥–∞–≤–∞–µ–º—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)
2. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
3. –ù–∞–ø–∏—à–∏—Ç–µ –≤ Discussions

---

**–£–¥–∞—á–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø–ª–∞–≥–∏–Ω–æ–≤! üöÄ**
